<VirtualHost *:8080>
    # Le nom du serveur est localhost
    ServerName localhost
    # Le DocumentRoot doit pointer vers le dossier 'public' de Symfony
    DocumentRoot /var/www/backend/public
    
    <Directory /var/www/backend/public>
        # Activer le module de réécriture et les .htaccess pour le routage Symfony
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/backend_8080_error.log
    CustomLog ${APACHE_LOG_DIR}/backend_8080_access.log combined

    # Configuration du routage pour que toutes les requêtes passent par index.php (front controller de Symfony)
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ %{ENV:BASE}/index.php [L]
</VirtualHost>